
&НаСервере
Процедура Команда1НаСервере()
	// Вставить содержимое обработчика.
	ДокОбъект=ЭтотОбъект.Объект;
	ДокОбъект.НовыйФильм.Очистить();
	
	СпрВыб=Справочники.Брэнд.Выбрать();
	Спрбрэнд = Новый Массив(255);
	нб=0;
	Пока СпрВыб.Следующий() Цикл
		нб=нб+1;
		СпрОб=СпрВыб.ПолучитьОбъект();
		Спрбрэнд[нб]=СоКрЛП(СпрОб.Наименование);
	Конеццикла;	
	
	ГСЧ= Новый ГенераторСлучайныхЧисел(нб);
	ФЛ=Ложь;
	нн=0;
	Для каждого Товар Из ДокОбъект.БазаФильмов Цикл
		ФЛ=Истина;
		Если (нн<=ДокОбъект.Числосценариев-1) Тогда
			нн=нн+1;
		Иначе	
			Прервать;
		КонецЕсли;
		
		Если ФЛ Тогда
			НовСтр=ДокОбъект.НовыйФильм.Добавить();
			нстр="";
			НовСтр.Сцена=Товар.Сцена;
			НовСтр.УчаствующиеАртисты=нстр+Товар.Сцена.Артист;
			НовСтр.Брэнд = СпрБрэнд[ГСЧ.СлучайноеЧисло(1,нб)];
		КонецЕсли;	
	КонецЦикла;
	
	
КонецПроцедуры

&НаКлиенте
Процедура Команда1(Команда)
	Команда1НаСервере();
КонецПроцедуры
